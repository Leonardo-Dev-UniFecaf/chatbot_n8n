/* Importando as cores da sua paleta */
:root {
    --roxo: #242149;
    --azul-escuro: #1A3666;
    --azul-claro: #0E77CC;
    --verde-escuro: #17A460;
    --verde-claro: #33DB89;
    --branco: #ffffff;
    --fundo-chat: #f7f9fc;
}

/* 1. Configuração Full Screen (SEM MUDANÇAS) */
html, body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: 'Nunito', sans-serif;
}

/* 2. Janela do Chat Full Screen (SEM MUDANÇAS) */
.chat-window-fullscreen {
    width: 100vw;
    height: 100vh;
    background: var(--branco);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* 3. Cabeçalho Refinado (SEM MUDANÇAS) */
.chat-header {
    background-color: var(--azul-escuro);
    padding: 20px 30px;
    display: flex;
    justify-content: center; 
    align-items: center;
    color: var(--branco);
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    flex-shrink: 0;
    z-index: 10;
}
.header-logo {
    height: 40px;
}

/* 4. Mensagens com Avatares - CORREÇÃO AQUI */
.chat-messages {
    flex-grow: 1;
    padding: 24px;
    overflow-y: auto;
    background-color: var(--fundo-chat);
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.message {
    display: flex;
    align-items: flex-end; /* Alinha a bolha e o avatar pela base */
    /* Removi o 'gap' daqui para controlar com margem e ter mais flexibilidade */
}

/* Estilo do Avatar (SEM MUDANÇAS) */
.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
    background-color: var(--branco);
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.08);
}
.avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Posição do Avatar do Bot */
.message.bot {
    justify-content: flex-start; /* Alinha tudo à esquerda */
}
.message.bot .avatar {
    margin-right: 10px; /* Espaçamento entre avatar e bolha do bot */
}
.message.bot .bubble {
    background-color: var(--branco);
    color: var(--roxo);
    border-bottom-left-radius: 6px;
}

/* ponta (tail) da bolha do bot - aponta para a esquerda (avatar) */
.message.bot .bubble::after {
    content: '';
    position: absolute;
    left: -8px;
    bottom: 12px;
    width: 0;
    height: 0;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
    border-right: 8px solid var(--branco);
}

/* Posição do Avatar do Usuário */
.message.user {
    justify-content: flex-end; /* Alinha tudo à direita */
    /* Removi 'flex-direction: row-reverse;' para simplificar a lógica */
}
.message.user .avatar {
    order: 2; /* Garante que o avatar do usuário fique à direita da bolha */
    margin-left: 10px; /* Espaçamento entre bolha e avatar do usuário */
}
.message.user .bubble {
    order: 1; /* Garante que a bolha do usuário fique à esquerda do avatar */
    background-color: var(--verde-claro);
    color: var(--roxo);
    font-weight: 600;
    border-bottom-right-radius: 6px;
}

/* ponta (tail) da bolha do usuário - aponta para a direita (avatar) */
.message.user .bubble::after {
    content: '';
    position: absolute;
    right: -8px;
    bottom: 12px;
    width: 0;
    height: 0;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
    border-left: 8px solid var(--verde-claro);
}

/* Estilo da Bolha (SEM MUDANÇAS) */
.message .bubble {
    padding: 14px 20px;
    border-radius: 22px;
    max-width: 75%;
    line-height: 1.6;
    font-size: 16px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    position: relative; /* necessário para as pontas (tails) das bolhas */
}

/* Indicador "Digitando..." (SEM MUDANÇAS) */
.message.typing .bubble {
    background-color: var(--branco);
    color: #888;
    font-style: italic;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.message.typing .bubble::after {
    content: '...';
    display: inline-block;
    animation: typing-dots 1s infinite;
}
@keyframes typing-dots {
    0% { opacity: .2; }
    20% { opacity: 1; }
    100% { opacity: .2; }
}

/* 5. Input de Texto Refinado (SEM MUDANÇAS) */
.chat-input-form {
    display: flex;
    align-items: center;
    padding: 20px 30px;
    border-top: 1px solid #e0e0e0;
    background: var(--branco);
    flex-shrink: 0;
}
#chat-input {
    flex-grow: 1;
    border: 1px solid #ddd;
    border-radius: 25px;
    padding: 15px 20px;
    font-size: 16px;
    margin-right: 15px;
    font-family: 'Nunito', sans-serif;
    transition: all 0.2s;
}
#chat-input:focus {
    outline: none;
    border-color: var(--azul-claro);
    box-shadow: 0 0 0 3px rgba(14, 119, 204, 0.2);
}
.chat-input-form button {
    background-color: var(--azul-escuro);
    border: none;
    color: var(--branco);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.2s;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0;
    margin: 0;
    flex-shrink: 0;
}
.chat-input-form button:hover {
    background-color: var(--verde-escuro);
}
.chat-input-form button svg {
    width: 24px;
    height: 24px;
    fill: var(--branco);
    margin-left: 2px;
}